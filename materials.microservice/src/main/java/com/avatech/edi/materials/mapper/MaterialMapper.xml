<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.avatech.edi.materials.mapper.MaterialMapper">

         <resultMap id="MaterialItemMap" type="com.avatech.edi.materials.model.bo.material.Material">
                    <result column="ItemCode" property="itemCode" jdbcType="NVARCHAR"/>
                    <result column="ItemName" property="itemName" jdbcType="NVARCHAR"/>
                    <result column="FrgnName" property="frgnName" jdbcType="NVARCHAR"/>
                    <result column="Spec" property="spec" jdbcType="NVARCHAR"/>
                    <result column="ItmsGrpName" property="itmsGrpName" jdbcType="NVARCHAR"/>
                    <result column="ItmsGrpCod" property="itmsGrpCod" jdbcType="INTEGER"/>
                    <result column="PrchseItem" property="prchseItem" jdbcType="INTEGER"/>
                    <result column="SellItem" property="sellItem" jdbcType="INTEGER"/>
                    <result column="InvntItem" property="invntItem" jdbcType="INTEGER"/>
                    <result column="DfltWH" property="dfltWH" jdbcType="NVARCHAR"/>
                    <result column="CardCode" property="cardCode" jdbcType="NVARCHAR"/>
                    <result column="BuyUnitMsr" property="buyUnitMsr" jdbcType="NVARCHAR"/>
                    <result column="SalUnitMsr" property="salUnitMsr" jdbcType="NVARCHAR"/>
                    <result column="ManSerNum" property="manSerNum" jdbcType="CHAR"/>
                    <result column="ManBtchNum" property="manBtchNum" jdbcType="CHAR"/>
                    <result column="validFor" property="validFor" jdbcType="CHAR"/>
                    <result column="INUoMEntry" property="iNUoMEntry" jdbcType="INTEGER"/>
                    <result column="PrcrmntMtd" property="prcrmntMtd" jdbcType="VARCHAR"/>
                    <result column="Udf1" property="udf1" jdbcType="NVARCHAR"/>
                    <result column="Udf2" property="udf2" jdbcType="NVARCHAR"/>
                    <result column="Udf3" property="udf3" jdbcType="NVARCHAR"/>
                    <result column="Udf4" property="udf4" jdbcType="NVARCHAR"/>
                    <result column="Udf5" property="udf5" jdbcType="NVARCHAR"/>
         </resultMap>


         <insert id="insertMaterialItem" parameterType="com.avatech.edi.materials.model.bo.material.Material">
             INSERT INTO "OITM" (
                     "ItemCode",
                     "ItemName",
                     "FrgnName",
                     "Spec",
                     "ItmsGrpName",
                     "ItmsGrpCod",
                     "PrchseItem",
                     "SellItem",
                     "InvntItem",
                     "DfltWH",
                     "CardCode",
                     "BuyUnitMsr",
                     "SalUnitMsr",
                     "ManSerNum",
                     "ManBtchNum",
                     "validFor",
                     "INUoMEntry",
                     "PrcrmntMtd",
                     "Udf1",
                     "Udf2",
                     "Udf3",
                     "Udf4",
                     "Udf5"
              )
             values(
                      #{itemCode},
                      #{itemName},
                      #{frgnName},
                      #{spec},
                      #{itmsGrpName},
                      #{itmsGrpCod},
                      #{prchseItem},
                      #{sellItem},
                      #{invntItem},
                      #{dfltWH},
                      #{cardCode},
                      #{buyUnitMsr},
                      #{salUnitMsr},
                      #{manSerNum},
                      #{manBtchNum},
                      #{validFor},
                      #{iNUoMEntry},
                      #{prcrmntMtd},
                      #{udf1},
                      #{udf2},
                      #{udf3},
                      #{udf4},
                      #{udf5}
             )
         </insert>

         <select id="searchMaterialItems" resultMap="MaterialItemMap">
             select top 100  "ItemCode"  ,
                        "ItemName"  ,
                        "FrgnName"  ,
                        "Spec",
                        "ItmsGrpNam",
                        T0."ItmsGrpCod" as "ItmsGrpCod",
                        "PrchseItem" ,
                        "SellItem" ,
                        "InvntItem" ,
                        "DfltWH",
                        "CardCode"  ,
                        "BuyUnitMsr",
                        "SalUnitMsr",
                        "ManSerNum" ,
                        "ManBtchNum" ,
                        "validFor" ,
                        "INUoMEntry"  ,
                        '' "PrcrmntMtd"  from OITM T0 INNER JOIN OITB T1
                        ON T0.ItmsGrpCod = T1.ItmsGrpCod WHERE T0."U_IsSync" = 'N'
         </select>

  <update id="updateMaterialItem"  parameterType="com.avatech.edi.materials.model.bo.material.Material"  >

      UPDATE  "ItemCode"  SET "U_IsSync"='Y' WHERE  "ItemCode"=#{itemCode}


  </update>


</mapper>